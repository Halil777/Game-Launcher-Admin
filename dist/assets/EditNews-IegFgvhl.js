import{a as _,u as g,r as d,j as e}from"./index-B3PNkLdk.js";import{a as x}from"./axios-B4uVmeYG.js";const w=()=>{const{id:i}=_(),b=g(),[t,c]=d.useState({title_tm:"",title_en:"",title_ru:"",sub_title_tm:"",sub_title_en:"",sub_title_ru:"",desc_tm:"",desc_en:"",desc_ru:"",image:""}),[o,p]=d.useState(null),[m,u]=d.useState("");d.useEffect(()=>{i&&(async()=>{try{const s=await x.get(`http://88.218.60.127:5678/news/${i}`);console.log("Fetched news data:",s.data),c(s.data),u(`http://88.218.60.127:5678/${s.data.image}`)}catch(s){console.error("Error fetching news:",s)}})()},[i]);const a=r=>{const{name:s,value:l}=r.target;c(n=>({...n,[s]:l}))},f=r=>{var l;const s=(l=r.target.files)==null?void 0:l[0];if(s){p(s);const n=new FileReader;n.onloadend=()=>{u(n.result)},n.readAsDataURL(s)}},h=async r=>{r.preventDefault();const s=new FormData;s.append("title_tm",t.title_tm),s.append("title_en",t.title_en),s.append("title_ru",t.title_ru),s.append("sub_title_tm",t.sub_title_tm),s.append("sub_title_en",t.sub_title_en),s.append("sub_title_ru",t.sub_title_ru),s.append("desc_tm",t.desc_tm),s.append("desc_en",t.desc_en),s.append("desc_ru",t.desc_ru),o?s.append("file",o):s.append("image",t.image);try{const l=localStorage.getItem("token");await x.patch(`http://88.218.60.127:5678/news/${i}`,s,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${l}`}}),b("/news")}catch(l){console.error("Error updating news:",l)}};return d.useEffect(()=>{console.log("News data:",t)},[t]),e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit News"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Title (TM)"}),e.jsx("input",{type:"text",name:"title_tm",value:t.title_tm,onChange:a,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Title (EN)"}),e.jsx("input",{type:"text",name:"title_en",value:t.title_en,onChange:a,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Title (RU)"}),e.jsx("input",{type:"text",name:"title_ru",value:t.title_ru,onChange:a,className:"w-full p-2 border border-gray-300 rounded",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Subtitle (TM)"}),e.jsx("input",{type:"text",name:"sub_title_tm",value:t.sub_title_tm,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Subtitle (EN)"}),e.jsx("input",{type:"text",name:"sub_title_en",value:t.sub_title_en,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Subtitle (RU)"}),e.jsx("input",{type:"text",name:"sub_title_ru",value:t.sub_title_ru,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (TM)"}),e.jsx("textarea",{name:"desc_tm",value:t.desc_tm,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (EN)"}),e.jsx("textarea",{name:"desc_en",value:t.desc_en,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (RU)"}),e.jsx("textarea",{name:"desc_ru",value:t.desc_ru,onChange:a,className:"w-full p-2 border border-gray-300 rounded"})]})]}),e.jsx("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Image"}),e.jsx("input",{type:"file",name:"image",onChange:f,className:"w-full p-2 border border-gray-300 rounded"}),m&&e.jsx("img",{src:m,alt:"Preview",className:"mt-2 w-32 h-32 object-cover"})]})}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Save Changes"})]})]})};export{w as default};
