import{r as d,u as p,j as e}from"./index-CQ2R6101.js";import{a as h}from"./axios-B4uVmeYG.js";const j=()=>{const[t,m]=d.useState({name_tm:"",name_en:"",name_ru:"",desc_tm:"",desc_en:"",desc_ru:"",image:null}),[u,i]=d.useState(!1),[c,l]=d.useState(null),x=p(),n=o=>{const{name:s,value:a}=o.target;m(r=>({...r,[s]:a}))},g=o=>{var a;const s=((a=o.target.files)==null?void 0:a[0])||null;m(r=>({...r,image:s}))},b=async o=>{if(o.preventDefault(),i(!0),l(null),!t.image){l("Image file is required.");return}if(!t.image){l("Image file is required.");return}const s=new FormData;Object.keys(t).forEach(a=>{const r=t[a];r!==null&&(a==="image"&&r instanceof File?s.append("file",r):s.append(a,r))});try{const a=localStorage.getItem("token"),r=await h.post("http://88.218.60.127:5678/category/add-category",s,{headers:{Authorization:`Bearer ${a}`}});r.status===201||r.status===204?x("/category"):l("Unexpected response from the server.")}catch(a){console.error("Error adding category:",a),l("Failed to add category. Please try again.")}finally{i(!1)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Category"}),c&&e.jsx("div",{className:"mb-4 text-red-500",children:c}),e.jsxs("form",{onSubmit:b,encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name (TM)"}),e.jsx("input",{type:"text",name:"name_tm",value:t.name_tm,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name (EN)"}),e.jsx("input",{type:"text",name:"name_en",value:t.name_en,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name (RU)"}),e.jsx("input",{type:"text",name:"name_ru",value:t.name_ru,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description (TM)"}),e.jsx("textarea",{name:"desc_tm",value:t.desc_tm,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description (EN)"}),e.jsx("textarea",{name:"desc_en",value:t.desc_en,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description (RU)"}),e.jsx("textarea",{name:"desc_ru",value:t.desc_ru,onChange:n,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",rows:4,required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Image"}),e.jsx("input",{type:"file",name:"image",onChange:g,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:u?"Submitting...":"Submit"})]})]})};export{j as default};
