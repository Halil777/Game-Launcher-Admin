import{u,r as n,j as e}from"./index-B3PNkLdk.js";const h=()=>{const i=u(),[r,d]=n.useState(!1),[t,o]=n.useState({title_en:"",title_ru:"",title_tm:"",desc_en:"",desc_ru:"",desc_tm:"",location:"LOCAL",site_url:"",star:"",steam_id:""}),a=s=>{o({...t,[s.target.name]:s.target.value})},m=async s=>{s.preventDefault(),d(!0);const c=localStorage.getItem("token");try{const l=await fetch("http://88.218.60.127:5678/game/add-game",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({...t,star:parseFloat(t.star)})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);alert("Game added successfully!"),i("/games")}catch(l){alert("Failed to add the game. Please try again."),console.error("Error adding game:",l)}finally{d(!1)}};return e.jsxs("div",{className:"max-w-lg mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add New Game"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"title_en",children:"Title (English)"}),e.jsx("input",{type:"text",name:"title_en",id:"title_en",className:"w-full p-2 border rounded",value:t.title_en,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"title_ru",children:"Title (Russian)"}),e.jsx("input",{type:"text",name:"title_ru",id:"title_ru",className:"w-full p-2 border rounded",value:t.title_ru,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"title_tm",children:"Title (Turkmen)"}),e.jsx("input",{type:"text",name:"title_tm",id:"title_tm",className:"w-full p-2 border rounded",value:t.title_tm,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"desc_en",children:"Description (English)"}),e.jsx("textarea",{name:"desc_en",id:"desc_en",className:"w-full p-2 border rounded",value:t.desc_en,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"desc_ru",children:"Description (Russian)"}),e.jsx("textarea",{name:"desc_ru",id:"desc_ru",className:"w-full p-2 border rounded",value:t.desc_ru,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"desc_tm",children:"Description (Turkmen)"}),e.jsx("textarea",{name:"desc_tm",id:"desc_tm",className:"w-full p-2 border rounded",value:t.desc_tm,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"location",children:"Location"}),e.jsxs("select",{name:"location",id:"location",className:"w-full p-2 border rounded",value:t.location,onChange:a,required:!0,children:[e.jsx("option",{value:"LOCAL",children:"LOCAL"}),e.jsx("option",{value:"GLOBAL",children:"GLOBAL"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"site_url",children:"Site URL"}),e.jsx("input",{type:"text",name:"site_url",id:"site_url",className:"w-full p-2 border rounded",value:t.site_url,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"star",children:"Star Rating"}),e.jsx("input",{type:"number",name:"star",id:"star",className:"w-full p-2 border rounded",value:t.star,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 mb-1",htmlFor:"steam_id",children:"Steam ID"}),e.jsx("input",{type:"text",name:"steam_id",id:"steam_id",className:"w-full p-2 border rounded",value:t.steam_id,onChange:a,required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"submit",className:`w-full py-2 bg-blue-500 text-white rounded ${r?"opacity-50 cursor-not-allowed":""}`,disabled:r,children:r?"Adding...":"Add Game"})})]})]})};export{h as default};
