import{u as o,j as e}from"./index-B3PNkLdk.js";import{u as d,F as x}from"./index-Z0zt6mE8.js";import{a as l}from"./axios-B4uVmeYG.js";const h=s=>l.get(s).then(r=>r.data),j=()=>{const{data:s,error:r,mutate:i}=d("http://88.218.60.127:5678/news",h),n=o();if(r)return e.jsx("div",{children:"Failed to load news"});if(!s)return e.jsx("div",{children:"Loading..."});const c=async t=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("Authentication token not found");await l.delete(`http://88.218.60.127:5678/news/${t}`,{headers:{Authorization:`Bearer ${a}`}}),i()}catch(a){console.error("Error deleting news:",a),alert(`Failed to delete news item with id ${t}`)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"News Page"}),e.jsx("button",{onClick:()=>n("/add-news"),className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Добавить новость"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Название"}),e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Изображение"}),e.jsx("th",{className:"w-1/2 py-2 px-4 text-left",children:"Описание"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"Действия"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:t.title_ru}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("img",{src:`http://88.218.60.127:5678/${t.image}`,alt:t.title_ru,className:"w-16 h-16 object-cover"})}),e.jsx("td",{className:"py-2 px-4",children:t.desc_ru}),e.jsx("td",{className:"py-2 px-4 text-center",children:e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this news item?")&&c(t.id)},className:"text-red-500 hover:text-red-700",children:e.jsx(x,{})})})]},t.id))})]})})]})};export{j as default};
