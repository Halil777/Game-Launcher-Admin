import{j as e,r as g,u as v}from"./index-B3PNkLdk.js";import{F as i,u as n}from"./index-Z0zt6mE8.js";import{a as h}from"./axios-B4uVmeYG.js";const f=({servers:s,onDelete:r})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 text-left",children:"Server Name"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Port"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Host"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Display Port"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Speed"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"Delete"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:t.server_name}),e.jsx("td",{className:"py-2 px-4",children:t.server_port}),e.jsx("td",{className:"py-2 px-4",children:t.server_host}),e.jsx("td",{className:"py-2 px-4",children:t.display_port}),e.jsx("td",{className:"py-2 px-4",children:t.speed}),e.jsx("td",{className:"py-2 px-4 text-center",children:e.jsx("button",{className:"text-red-500 hover:text-red-700",title:"Delete",onClick:()=>r(t.id),children:e.jsx(i,{})})})]},t.id))})]})}),S=({servers:s,onDelete:r})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 text-left",children:"Server Name"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Port"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Host"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Display Port"}),e.jsx("th",{className:"py-2 px-4 text-left",children:"Speed"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"Delete"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:t.server_name}),e.jsx("td",{className:"py-2 px-4",children:t.server_port}),e.jsx("td",{className:"py-2 px-4",children:t.server_host}),e.jsx("td",{className:"py-2 px-4",children:t.display_port}),e.jsx("td",{className:"py-2 px-4",children:t.speed}),e.jsx("td",{className:"py-2 px-4 text-center",children:e.jsx("button",{className:"text-red-500 hover:text-red-700",title:"Delete",onClick:()=>r(t.id),children:e.jsx(i,{})})})]},t.id))})]})}),x=async s=>{const r=localStorage.getItem("token"),t=r?{Authorization:`Bearer ${r}`}:{};return(await h.get(s,{headers:t})).data},k=()=>{const[s,r]=g.useState("local"),t=v(),{data:a,error:p,mutate:m}=n("http://88.218.60.127:5678/server/get-servers?location=GLOBAL",x),{data:c,error:b,mutate:j}=n("http://88.218.60.127:5678/server/get-servers?location=LOCAL",x),d=async(l,N)=>{const o=localStorage.getItem("token"),y=o?{Authorization:`Bearer ${o}`}:{};try{await h.delete(`http://88.218.60.127:5678/server/delete-server/${l}`,{headers:y}),N==="LOCAL"?j():m()}catch(u){console.error("Error deleting server:",u)}};return p||b?e.jsx("div",{children:"Failed to load servers"}):!a||!c?e.jsx("div",{children:"Loading..."}):e.jsx("div",{className:"container mx-auto p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Servers Page"}),e.jsxs("div",{className:"flex border-b border-gray-300 mb-4",children:[e.jsx("button",{className:`py-2 px-4 ${s==="local"?"bg-blue-500 text-white":"bg-gray-200"} rounded-t`,onClick:()=>r("local"),children:"Local Servers"}),e.jsx("button",{className:`py-2 px-4 ${s==="global"?"bg-blue-500 text-white":"bg-gray-200"} rounded-t`,onClick:()=>r("global"),children:"Global Servers"})]}),e.jsxs("div",{className:"p-4 bg-white border border-gray-300 rounded-b",children:[s==="local"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Local Servers"}),e.jsx("button",{className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",onClick:()=>t("/add-local-server"),children:"Add Local Server"})]}),e.jsx(f,{servers:c,onDelete:l=>d(l,"LOCAL")})]}),s==="global"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Global Servers"}),e.jsx("button",{className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",onClick:()=>t("/add-global-server"),children:"Add Global Server"})]}),e.jsx(S,{servers:a,onDelete:l=>d(l,"GLOBAL")})]})]})]})})};export{k as default};
