import{a as b,u as N,r as c,j as e}from"./index-CQ2R6101.js";import{a as x}from"./axios-B4uVmeYG.js";const _=()=>{const{id:o}=b(),g=N(),[s,d]=c.useState({name_tm:"",name_en:"",name_ru:"",desc_tm:"",desc_en:"",desc_ru:"",image:""}),[m,p]=c.useState(null),[i,u]=c.useState("");c.useEffect(()=>{o&&(async()=>{try{const a=await x.get(`http://88.218.60.127:5678/category/${o}`);console.log("Fetched category data:",a.data),d(a.data),u(`http://88.218.60.127:5678/${a.data.image}`)}catch(a){console.error("Error fetching category:",a)}})()},[o]);const t=n=>{const{name:a,value:r}=n.target;d(l=>({...l,[a]:r}))},f=n=>{var r;const a=(r=n.target.files)==null?void 0:r[0];if(a){p(a);const l=new FileReader;l.onloadend=()=>{u(l.result)},l.readAsDataURL(a)}},h=async n=>{n.preventDefault();const a=new FormData;a.append("name_tm",s.name_tm),a.append("name_en",s.name_en),a.append("name_ru",s.name_ru),a.append("desc_tm",s.desc_tm),a.append("desc_en",s.desc_en),a.append("desc_ru",s.desc_ru),m?a.append("image",m):a.append("image",s.image);try{const r=localStorage.getItem("token");if(!r){console.error("No token found in local storage");return}await x.patch(`http://88.218.60.127:5678/category/update-category/${o}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${r}`}}),g("/category")}catch(r){console.error("Error updating category:",r)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Edit Category"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Name (TM)"}),e.jsx("input",{type:"text",name:"name_tm",value:s.name_tm,onChange:t,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Name (EN)"}),e.jsx("input",{type:"text",name:"name_en",value:s.name_en,onChange:t,className:"w-full p-2 border border-gray-300 rounded",required:!0})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Name (RU)"}),e.jsx("input",{type:"text",name:"name_ru",value:s.name_ru,onChange:t,className:"w-full p-2 border border-gray-300 rounded",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (TM)"}),e.jsx("textarea",{name:"desc_tm",value:s.desc_tm,onChange:t,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (EN)"}),e.jsx("textarea",{name:"desc_en",value:s.desc_en,onChange:t,className:"w-full p-2 border border-gray-300 rounded"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Description (RU)"}),e.jsx("textarea",{name:"desc_ru",value:s.desc_ru,onChange:t,className:"w-full p-2 border border-gray-300 rounded"})]})]}),e.jsx("div",{className:"flex flex-col lg:flex-row lg:space-x-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block mb-2 font-medium",children:"Image"}),e.jsx("input",{type:"file",name:"image",onChange:f,className:"w-full p-2 border border-gray-300 rounded"}),i&&e.jsx("img",{src:i,alt:"Preview",className:"mt-2 w-32 h-32 object-cover"})]})}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Save Changes"})]})]})};export{_ as default};
