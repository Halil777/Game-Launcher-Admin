import{u as b,r as c,j as e}from"./index-CQ2R6101.js";import{a as g}from"./axios-B4uVmeYG.js";const _=()=>{const u=b(),[t,d]=c.useState({title_tm:"",title_en:"",title_ru:"",sub_title_tm:"",sub_title_en:"",sub_title_ru:"",desc_tm:"",desc_en:"",desc_ru:"",image:null}),[i,o]=c.useState(null),s=l=>{const{name:n,value:a}=l.target;d(r=>({...r,[n]:a}))},m=l=>{var a;const n=((a=l.target.files)==null?void 0:a[0])||null;d(r=>({...r,image:n}))},p=async l=>{if(l.preventDefault(),!t.image){o("Image file is required.");return}const n=new FormData;Object.keys(t).forEach(a=>{const r=t[a];r!==null&&(a==="image"&&r instanceof File?n.append("file",r):n.append(a,r))});try{const a=localStorage.getItem("token"),r=await g.post("http://88.218.60.127:5678/news",n,{headers:{Authorization:`Bearer ${a}`}});r.status===201||r.status===204?u("/news"):o("Unexpected response from the server.")}catch(a){console.error("Error adding news:",a),o("Failed to add news. Please try again.")}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add News"}),i&&e.jsx("div",{className:"text-red-500 mb-4",children:i}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{type:"text",name:"title_tm",placeholder:"Title (TM)",value:t.title_tm,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("input",{type:"text",name:"title_en",placeholder:"Title (EN)",value:t.title_en,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("input",{type:"text",name:"title_ru",placeholder:"Title (RU)",value:t.title_ru,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("input",{type:"text",name:"sub_title_tm",placeholder:"Subtitle (TM)",value:t.sub_title_tm,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("input",{type:"text",name:"sub_title_en",placeholder:"Subtitle (EN)",value:t.sub_title_en,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("input",{type:"text",name:"sub_title_ru",placeholder:"Subtitle (RU)",value:t.sub_title_ru,onChange:s,className:"border border-gray-300 p-2 rounded"}),e.jsx("textarea",{name:"desc_tm",placeholder:"Description (TM)",value:t.desc_tm,onChange:s,className:"border border-gray-300 p-2 rounded",rows:3}),e.jsx("textarea",{name:"desc_en",placeholder:"Description (EN)",value:t.desc_en,onChange:s,className:"border border-gray-300 p-2 rounded",rows:3}),e.jsx("textarea",{name:"desc_ru",placeholder:"Description (RU)",value:t.desc_ru,onChange:s,className:"border border-gray-300 p-2 rounded",rows:3})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block mb-2",children:"Upload Image:"}),e.jsx("input",{type:"file",name:"image",onChange:m,className:"border border-gray-300 p-2 rounded"})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Submit"})]})]})};export{_ as default};
