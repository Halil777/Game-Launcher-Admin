import{j as e,r as n}from"./index-B3PNkLdk.js";import{u as b,F as j,m as g}from"./index-Z0zt6mE8.js";import{a as v}from"./axios-B4uVmeYG.js";const y=s=>fetch(s).then(r=>r.json()),N=()=>{const{data:s,error:r}=b("http://88.218.60.127:5678/game-servers",y),d=async t=>{if(window.confirm("Are you sure you want to delete this server?"))try{await fetch(`http://88.218.60.127:5678/game-servers/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),g("http://88.218.60.127:5678/game-servers")}catch(l){console.error("Error deleting server:",l)}};return r?e.jsx("div",{children:"Error loading data."}):s?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Name"}),e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"IP Address"}),e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Port"}),e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Status"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:t.name}),e.jsx("td",{className:"py-2 px-4",children:t.ipAddress}),e.jsx("td",{className:"py-2 px-4",children:t.port}),e.jsx("td",{className:"py-2 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${t.status==="active"?"bg-green-500":t.status==="passive"?"bg-red-500":t.status==="pending"?"bg-yellow-500":"bg-gray-500"}`}),e.jsx("span",{children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})}),e.jsx("td",{className:"py-2 px-4 text-center",children:e.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:()=>d(t.id),children:e.jsx(j,{})})})]},t.id))})]})}):e.jsx("div",{children:"Loading..."})},w=()=>{const[s,r]=n.useState(""),[d,t]=n.useState(""),[l,m]=n.useState(""),[o,h]=n.useState("active"),[c,i]=n.useState(null),u=a=>/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(a),p=async a=>{if(a.preventDefault(),!u(d)){i("Invalid IP Address format.");return}if(!/^\d+$/.test(l)||parseInt(l)<1||parseInt(l)>65535){i("Port must be a number between 1 and 65535.");return}i(null);try{await v.post("http://88.218.60.127:5678/game-servers",{name:s,ipAddress:d,port:parseInt(l),status:o},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),window.location.reload()}catch(x){console.error("Error adding TeamSpeak server:",x),i("Failed to add server. Please try again.")}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add New TeamSpeak Server"}),c&&e.jsx("p",{className:"text-red-500 mb-4",children:c}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",id:"name",value:s,onChange:a=>r(a.target.value),className:"w-full border border-gray-300 rounded p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ipAddress",className:"block text-gray-700 mb-1",children:"IP Address"}),e.jsx("input",{type:"text",id:"ipAddress",value:d,onChange:a=>t(a.target.value),className:"w-full border border-gray-300 rounded p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"port",className:"block text-gray-700 mb-1",children:"Port"}),e.jsx("input",{type:"number",id:"port",value:l,onChange:a=>m(a.target.value),className:"w-full border border-gray-300 rounded p-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{id:"status",value:o,onChange:a=>h(a.target.value),className:"w-full border border-gray-300 rounded p-2",required:!0,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"passive",children:"Passive"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),e.jsx("button",{type:"submit",className:"mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add Server"})]})]})},k=()=>{const[s,r]=n.useState("view"),d=()=>{r("add")},t=()=>{r("view")};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"TeamSpeak Servers"}),s==="view"&&e.jsx("button",{onClick:d,className:"bg-blue-500 text-white py-2 px-4 rounded",children:"Add TeamSpeak"}),(s==="add"||s==="edit")&&e.jsx("button",{onClick:t,className:"bg-gray-500 text-white py-2 px-4 rounded",children:"Back"})]}),s==="view"&&e.jsx(N,{}),s==="add"&&e.jsx(w,{})]})};export{k as default};
