import{u as o,j as e}from"./index-CQ2R6101.js";import{u as d,F as x,a as h}from"./index-C_wC8Lvt.js";import{a as i}from"./axios-B4uVmeYG.js";const m=s=>i.get(s).then(r=>r.data),N=()=>{const{data:s,error:r,mutate:n}=d("http://88.218.60.127:5678/news",m),l=o();if(r)return e.jsx("div",{children:"Failed to load news"});if(!s)return e.jsx("div",{children:"Loading..."});const c=async t=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("Authentication token not found");await i.delete(`http://88.218.60.127:5678/news/${t}`,{headers:{Authorization:`Bearer ${a}`}}),n()}catch(a){console.error("Error deleting news:",a),alert(`Failed to delete news item with id ${t}`)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"News Page"}),e.jsx("button",{onClick:()=>l("/add-news"),className:"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700",children:"Добавить новость"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Название"}),e.jsx("th",{className:"w-1/4 py-2 px-4 text-left",children:"Изображение"}),e.jsx("th",{className:"w-1/2 py-2 px-4 text-left",children:"Описание"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"Действия"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 px-4",children:t.title_ru}),e.jsx("td",{className:"py-2 px-4",children:e.jsx("img",{src:`http://88.218.60.127:5678/${t.image}`,alt:t.title_ru,className:"w-16 h-16 object-cover"})}),e.jsx("td",{className:"py-2 px-4",children:t.desc_ru}),e.jsxs("td",{className:"py-2 px-4 text-center",children:[e.jsx("button",{onClick:()=>l(`/edit-news/${t.id}`),className:"text-blue-500 hover:text-blue-700 mr-2",children:e.jsx(x,{})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this news item?")&&c(t.id)},className:"text-red-500 hover:text-red-700",children:e.jsx(h,{})})]})]},t.id))})]})})]})};export{N as default};
